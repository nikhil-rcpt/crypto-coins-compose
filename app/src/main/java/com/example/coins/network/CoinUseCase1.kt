package com.example.coins.network

import com.example.coins.data.discover.PersonalisedModelGroup
import com.example.coins.data.discover.PersonalisedNewsModel
import com.example.coins.data.discover.dummyTrending
import com.example.coins.data.discover.personalisedGroup
import com.example.coins.data.latestListing.LatestCryptoListing
import com.example.coins.data.profile.ProfileModel
import com.example.coins.data.profile.dummyProfileModel
import com.squareup.moshi.Moshi
import javax.inject.Inject

class CoinUseCase1 @Inject constructor(private val coinService: CoinService) {

    suspend fun fetchLatestListing(start: Int = 1, limit: Int = 5000, convert: String = "INR"): Result<LatestCryptoListing> {
        val queryMap = hashMapOf<String, Any?>("start" to start, "limit" to limit, "convert" to convert)
//        return coinService.getLatest(queryMap).executeWithRetry().toResult()
        return try {
            val res = coinService.getLatest(queryMap)
            Success(res, true)
        } catch (e: Exception) {
            ErrorResult(Throwable(e.message))
        }
    }

    suspend fun fetchTestLatestListing(): Result<LatestCryptoListing> {
        val res = Moshi.Builder().build().adapter(LatestCryptoListing::class.java).fromJson(aa)!!
        return Success(res, true)
    }

    suspend fun fetchNewsItems(): Result<PersonalisedModelGroup> {
//        val res = Moshi.Builder().build().adapter(LatestCryptoListing::class.java).fromJson(aa)!!
        return Success(personalisedGroup, true)
    }
    suspend fun fetchTrendingNewsItems(): Result<PersonalisedNewsModel> {
//        val res = Moshi.Builder().build().adapter(LatestCryptoListing::class.java).fromJson(aa)!!
        return Success(dummyTrending, true)
    }

    suspend fun fetchSettings(): Result<ProfileModel> {
        return Success(dummyProfileModel,true)

    }
}

const val aa ="{\"status\":{\"timestamp\":\"2021-02-17T14:13:58.558Z\",\"error_code\":0,\"error_message\":null,\"elapsed\":16,\"credit_count\":1,\"notice\":null,\"total_count\":4088},\"data\":[{\"id\":1,\"name\":\"Bitcoin\",\"symbol\":\"BTC\",\"slug\":\"bitcoin\",\"num_market_pairs\":9682,\"date_added\":\"2013-04-28T00:00:00.000Z\",\"tags\":[\"mineable\",\"pow\",\"sha-256\",\"store-of-value\",\"state-channels\",\"coinbase-ventures-portfolio\",\"three-arrows-capital-portfolio\",\"polychain-capital-portfolio\"],\"max_supply\":21000000,\"circulating_supply\":18631137,\"total_supply\":18631137,\"platform\":null,\"cmc_rank\":1,\"last_updated\":\"2021-02-17T14:12:02.000Z\",\"quote\":{\"INR\":{\"price\":3725739.980718678,\"volume_24h\":6139026846995.911,\"percent_change_1h\":-0.41416196,\"percent_change_24h\":3.54785379,\"percent_change_7d\":10.6837929,\"percent_change_30d\":38.53321121,\"market_cap\":69414772007147.05,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":1027,\"name\":\"Ethereum\",\"symbol\":\"ETH\",\"slug\":\"ethereum\",\"num_market_pairs\":5909,\"date_added\":\"2015-08-07T00:00:00.000Z\",\"tags\":[\"mineable\",\"pow\",\"smart-contracts\",\"coinbase-ventures-portfolio\",\"three-arrows-capital-portfolio\",\"polychain-capital-portfolio\"],\"max_supply\":null,\"circulating_supply\":114708904.8115,\"total_supply\":114708904.8115,\"platform\":null,\"cmc_rank\":2,\"last_updated\":\"2021-02-17T14:12:02.000Z\",\"quote\":{\"INR\":{\"price\":132738.29421211223,\"volume_24h\":2811947273396.583,\"percent_change_1h\":0.35977281,\"percent_change_24h\":1.53676002,\"percent_change_7d\":3.23674065,\"percent_change_30d\":46.47001017,\"market_cap\":15226264355618.062,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":825,\"name\":\"Tether\",\"symbol\":\"USDT\",\"slug\":\"tether\",\"num_market_pairs\":10669,\"date_added\":\"2015-02-25T00:00:00.000Z\",\"tags\":[\"store-of-value\",\"payments\",\"stablecoin\",\"stablecoin-asset-backed\"],\"max_supply\":null,\"circulating_supply\":32416104717.24555,\"total_supply\":33508167440.845192,\"platform\":{\"id\":1027,\"name\":\"Ethereum\",\"symbol\":\"ETH\",\"slug\":\"ethereum\",\"token_address\":\"0xdac17f958d2ee523a2206206994597c13d831ec7\"},\"cmc_rank\":3,\"last_updated\":\"2021-02-17T14:12:07.000Z\",\"quote\":{\"INR\":{\"price\":72.89634650598902,\"volume_24h\":10438867092849.424,\"percent_change_1h\":-0.19551734,\"percent_change_24h\":0.11127826,\"percent_change_7d\":-1.49829243,\"percent_change_30d\":-0.02451958,\"market_cap\":2363015601842.7563,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":6636,\"name\":\"Polkadot\",\"symbol\":\"DOT\",\"slug\":\"polkadot-new\",\"num_market_pairs\":140,\"date_added\":\"2020-08-19T00:00:00.000Z\",\"tags\":[\"substrate\",\"polkadot\",\"binance-chain\",\"dot-ecosystem\",\"three-arrows-capital-portfolio\",\"polychain-capital-portfolio\"],\"max_supply\":null,\"circulating_supply\":908842484.5874836,\"total_supply\":1044468980.5383563,\"platform\":null,\"cmc_rank\":4,\"last_updated\":\"2021-02-17T14:13:05.000Z\",\"quote\":{\"INR\":{\"price\":2227.1793824472243,\"volume_24h\":329975534071.0764,\"percent_change_1h\":-0.36009733,\"percent_change_24h\":1.14558772,\"percent_change_7d\":30.11147601,\"percent_change_30d\":80.2963614,\"market_cap\":2024155243565.3525,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":2010,\"name\":\"Cardano\",\"symbol\":\"ADA\",\"slug\":\"cardano\",\"num_market_pairs\":230,\"date_added\":\"2017-10-01T00:00:00.000Z\",\"tags\":[\"mineable\",\"dpos\",\"pos\",\"platform\",\"research\",\"smart-contracts\",\"staking\",\"binance-chain\"],\"max_supply\":45000000000,\"circulating_supply\":31112484646,\"total_supply\":45000000000,\"platform\":null,\"cmc_rank\":5,\"last_updated\":\"2021-02-17T14:12:09.000Z\",\"quote\":{\"INR\":{\"price\":63.22000219775847,\"volume_24h\":450693315705.379,\"percent_change_1h\":-0.52097523,\"percent_change_24h\":-1.74723632,\"percent_change_7d\":4.48649804,\"percent_change_30d\":133.95117122,\"market_cap\":1966931347697.8467,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":52,\"name\":\"XRP\",\"symbol\":\"XRP\",\"slug\":\"xrp\",\"num_market_pairs\":676,\"date_added\":\"2013-08-04T00:00:00.000Z\",\"tags\":[\"medium-of-exchange\",\"enterprise-solutions\",\"binance-chain\"],\"max_supply\":100000000000,\"circulating_supply\":45404028640,\"total_supply\":99990831162,\"platform\":null,\"cmc_rank\":6,\"last_updated\":\"2021-02-17T14:13:02.000Z\",\"quote\":{\"INR\":{\"price\":39.23671510484019,\"volume_24h\":757128232310.6322,\"percent_change_1h\":-0.07246853,\"percent_change_24h\":-0.78430964,\"percent_change_7d\":9.94737608,\"percent_change_30d\":88.84261792,\"market_cap\":1781504936359.6846,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":1839,\"name\":\"Binance Coin\",\"symbol\":\"BNB\",\"slug\":\"binance-coin\",\"num_market_pairs\":468,\"date_added\":\"2017-07-25T00:00:00.000Z\",\"tags\":[\"marketplace\",\"payments\"],\"max_supply\":170532785,\"circulating_supply\":154532785,\"total_supply\":170532785,\"platform\":null,\"cmc_rank\":7,\"last_updated\":\"2021-02-17T14:12:09.000Z\",\"quote\":{\"INR\":{\"price\":10453.037921734449,\"volume_24h\":191968976467.0659,\"percent_change_1h\":1.40194084,\"percent_change_24h\":9.64806875,\"percent_change_7d\":8.44330694,\"percent_change_30d\":221.12677262,\"market_cap\":1615337061756.2366,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":2,\"name\":\"Litecoin\",\"symbol\":\"LTC\",\"slug\":\"litecoin\",\"num_market_pairs\":753,\"date_added\":\"2013-04-28T00:00:00.000Z\",\"tags\":[\"mineable\",\"pow\",\"scrypt\",\"medium-of-exchange\",\"binance-chain\"],\"max_supply\":84000000,\"circulating_supply\":66506479.39559093,\"total_supply\":66506479.39559093,\"platform\":null,\"cmc_rank\":8,\"last_updated\":\"2021-02-17T14:13:02.000Z\",\"quote\":{\"INR\":{\"price\":16629.514896330013,\"volume_24h\":956500690444.3174,\"percent_change_1h\":2.18442454,\"percent_change_24h\":6.26992424,\"percent_change_7d\":25.29260321,\"percent_change_30d\":49.51173373,\"market_cap\":1105970489811.4443,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":1831,\"name\":\"Bitcoin Cash\",\"symbol\":\"BCH\",\"slug\":\"bitcoin-cash\",\"num_market_pairs\":579,\"date_added\":\"2017-07-23T00:00:00.000Z\",\"tags\":[\"mineable\",\"marketplace\",\"enterprise-solutions\",\"binance-chain\"],\"max_supply\":21000000,\"circulating_supply\":18657693.75,\"total_supply\":18657693.75,\"platform\":null,\"cmc_rank\":9,\"last_updated\":\"2021-02-17T14:12:07.000Z\",\"quote\":{\"INR\":{\"price\":52163.726886709985,\"volume_24h\":693636585358.6669,\"percent_change_1h\":0.0518517,\"percent_change_24h\":0.64467949,\"percent_change_7d\":44.25686123,\"percent_change_30d\":42.64453412,\"market_cap\":973254841110.876,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}},{\"id\":1975,\"name\":\"Chainlink\",\"symbol\":\"LINK\",\"slug\":\"chainlink\",\"num_market_pairs\":471,\"date_added\":\"2017-09-20T00:00:00.000Z\",\"tags\":[\"platform\",\"defi\",\"oracles\",\"smart-contracts\",\"substrate\",\"polkadot\",\"dot-ecosystem\"],\"max_supply\":1000000000,\"circulating_supply\":407009556.4344444,\"total_supply\":1000000000,\"platform\":{\"id\":1027,\"name\":\"Ethereum\",\"symbol\":\"ETH\",\"slug\":\"ethereum\",\"token_address\":\"0x514910771af9ca656af840dff83e8264ecf986ca\"},\"cmc_rank\":10,\"last_updated\":\"2021-02-17T14:12:10.000Z\",\"quote\":{\"INR\":{\"price\":2320.2891998553573,\"volume_24h\":263966679997.56827,\"percent_change_1h\":-0.64636997,\"percent_change_24h\":-1.27126045,\"percent_change_7d\":17.54644563,\"percent_change_30d\":45.46811032,\"market_cap\":944379878032.761,\"last_updated\":\"2021-02-17T14:13:06.000Z\"}}}]}"
